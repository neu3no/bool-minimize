/*
 * Author
 *  Christian Neubauer
 *  web: http://neu3no.de/  twitter: @neu3no  mail: the@neu3no.de
 *    
 * Licence
 *  (cc-by-nc) 2012 
 *  This work is licensed under the Creative Commons Attribution-NonCommercial 
 *  3.0 Unported License. To view a copy of this license, visit 
 *  http://creativecommons.org/licenses/by-nc/3.0/.
 * 
 * Project
 *  website: http://neu3no.de/bool-minimize
 *  github : https://github.com/neu3no/bool-minimize
 * 
 */
if(!Object.N3OFUNCZ){alert("functions.js needs to be embedded first!")}function pITable(b,a){this.parent=b;this.quineTable=a;this.currentchart=0;this.labels={0:"plain chart",1:"columns optimized",2:"rows optimized"};pitable=this;$("#pitable").remove();this.table=$("<table/>");this.caption=$("<caption/>");this.thead=$("<thead/>");this.tbody=$("<tbody/>");$(this.table).attr("id","pitable");$(this.thead).addClass("dark");this.spanCurrent=$("<span/>");this.buttonPrevious=$("<button/>");this.buttonNext=$("<button/>");$(this.buttonPrevious).html("&lt;");$(this.buttonNext).html("&gt;");$(this.caption).append(this.buttonPrevious).append(this.spanCurrent).append(this.buttonNext);$(this.table).append(this.caption).append(this.thead).append(this.tbody);$(this.buttonNext).click(this.nextChart);$(this.buttonPrevious).click(this.previousChart);$(this.parent).append(this.table);this.fillChart(this.currentchart);return this}pITable.prototype.nextChart=function(){pitable.fillChart(pitable.currentchart+1)};pITable.prototype.previousChart=function(){pitable.fillChart(pitable.currentchart-1)};pITable.prototype.fillChart=function(c){pichart=this.quineTable.getPIChart(c);if(!pichart){return false}else{this.cols=pichart.mint.length;var h=this.labels[c>0?((c-1)%2)+1:0];$(this.spanCurrent).text(h);this.currentchart=c;var b=$("<tr/>");b.append("<td/>");for(coli in pichart.cols){var e=decToBin(coli,this.quineTable.literalCount-1)+"b";var a=coli;b.append($("<th/>").text(a).attr("title",e))}$(this.tbody).html("");for(rowi in pichart.rows){var f=$("<tr/>");var g=pichart.rows[rowi];rowi=rowi.split(",");f.append($("<th/>").text(maskedDecToBin(rowi[0],rowi[1],this.quineTable.literalCount-1)).addClass("dark"));for(coli in pichart.cols){var d=pichart.cols[coli];var h=(g.indexOf(Number(coli))>=0?"X":" ");f.append($("<td/>").text(h))}this.tbody.append(f)}$(this.thead).html("");$(this.thead).append(b)}};function targetTable(b,a){this.quineTable=a;this.currentTableNum=0;ttable=this;$("#targettable").remove();this.parent=b;this.table=$("<table/>");this.cols=a.literalCount;this.caption=$("<caption/>");this.thead=$("<thead/>");this.tbody=$("<tbody/>");this.spanCurrent=$("<span/>");this.buttonPrevious=$("<button/>");this.buttonNext=$("<button/>");$(this.buttonPrevious).html("&lt;");$(this.buttonNext).html("&gt;");$(this.caption).append(this.buttonPrevious).append(this.spanCurrent).append(this.buttonNext);$(this.table).append(this.caption).append(this.thead).append(this.tbody);$(this.buttonNext).click(this.nextTable);$(this.buttonPrevious).click(this.previousTable);$(this.table).attr("id","targettable");$(this.thead).addClass("dark");for(j=0;j<this.cols-1;j++){this.thead.append("<th>x"+(j+1)+"</th>")}this.fillTable(0);$(this.parent).append(this.table);return this}targetTable.prototype.fillTable=function(e){var c=this.quineTable.getTable(e);if(!c){return false}else{$(this.spanCurrent).text(e+1);$(this.tbody).html("");for(tidx in c){var a=$("<tr/>");a.append("<th class='dark' colspan='"+this.cols+2+"'></th>");this.tbody.append(a);var b=c[tidx];for(vidx in b){var f=$("<tr/>");var d=maskedDecToBin(b[vidx][0],b[vidx][1],this.quineTable.literalCount-1);for(j=0;j<this.cols-1;j++){f.append("<td>"+d[j]+"</td>")}this.tbody.append(f)}}$(this.parent).css("min-width",$(this.table).width());this.currentTable=e}};targetTable.prototype.nextTable=function(){ttable.fillTable(ttable.currentTable+1)};targetTable.prototype.previousTable=function(){ttable.fillTable(ttable.currentTable-1)};function sourceTable(c,a){this.table=$("<table/>");this.inputCount=(a?a:3);this.parent=c;this.values=[];this.fillMode="rand";var b=this;this.caption=$("<caption/>");this.thead=$("<thead/>");this.tbody=$("<tbody/>");this.spanInputCount=$("<span/>");this.buttonInputAdd=$("<button/>");this.buttonInputRemove=$("<button/>");this.buttonYZero=$("<button/>").addClass("modebtn");this.buttonYOne=$("<button/>").addClass("modebtn");this.buttonYRand=$("<button/>").addClass("modebtn").addClass("active");this.buttonFire=$("<button/>");$(this.table).attr("id","sourcetable");$(this.thead).addClass("dark");$(this.buttonInputAdd).text("+");$(this.buttonInputRemove).text("-");$(this.buttonYZero).text("0");$(this.buttonYOne).text("1");$(this.buttonYRand).text("r");$(this.buttonFire).text("go");$(this.caption).append(this.buttonInputRemove).append(this.spanInputCount).append(this.buttonInputAdd).append("<span>|</span>").append(this.buttonYZero).append(this.buttonYOne).append(this.buttonYRand).append("<span>|</span>").append(this.buttonFire);$(this.table).append(this.caption).append(this.thead).append(this.tbody);$(this.buttonInputAdd).click(this.addInput);$(this.buttonInputRemove).click(this.removeInput);$(this.buttonFire).click(function(){b.fire()});$(this.buttonYZero).click(function(){b.fillMode="zero";b.tablefill();$(".modebtn").removeClass("active");$(this).addClass("active")});$(this.buttonYOne).click(function(){b.fillMode="one";b.tablefill();$(".modebtn").removeClass("active");$(this).addClass("active")});$(this.buttonYRand).click(function(){b.fillMode="rand";b.tablefill();$(".modebtn").removeClass("active");$(this).addClass("active")});$(this.parent).append(this.table);this.tablefill();return this}sourceTable.prototype.tablefill=function(b){var f=this.inputCount;var e=Math.pow(2,f);this.values=new Array(e);this.tbody.empty();this.thead.empty();for(j=0;j<f;j++){this.thead.append("<th>x"+(j+1)+"</th>")}this.thead.append("<th>y</th>");for(i=0;i<e;i++){var d=$("<tr/>");var c=decToBin(i);var g;while(c.length<f){c="0"+c}for(j=0;j<f;j++){d.append("<td>"+c[j]+"</td>")}if(b&&b.length>=e){g=Number(b[i])}else{switch(this.fillMode){case"rand":g=Math.round(Math.random());break;case"one":g=1;break;case"zero":g=0;break;default:alert("wrong fill mode")}}var a=$("<input maxlength='1' type='text' value='"+g+"'/>");a.attr("rel",i);a.change(this.checkYVal);d.append($("<td class='yval'></td>").append(a));this.tbody.append(d);this.values[i]=(i<<1)+g}$(this.spanInputCount).text(this.inputCount);$(this.parent).css("min-width",$(this.table).width());this.newTable(this.values)};sourceTable.prototype.checkYVal=function(b){if(!b.attr){b=this}var a=Number($(b).attr("rel"));if($(b).val()>=1){$(b).val(1)}else{$(b).val(0)}stable.values[a]=(a<<1)+Number($(b).val());stable.changed(stable.values)};sourceTable.prototype.addInput=function(){if(stable.inputCount<8){stable.inputCount++;stable.tablefill()}};sourceTable.prototype.removeInput=function(){if(stable.inputCount>2){stable.inputCount--;stable.tablefill()}};sourceTable.prototype.getMatrix=function(){return this.values};sourceTable.prototype.changed=function(a){};sourceTable.prototype.newTable=function(){};sourceTable.prototype.fire=function(){};